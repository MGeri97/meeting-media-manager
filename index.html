<!DOCTYPE html>
<html>

<head>
  <title>JW Meeting Media Fetcher</title>
  <link rel="stylesheet" href="node_modules/bootstrap-dark-5/dist/css/bootstrap-dark.min.css">
  <link rel="stylesheet" href="node_modules/select2/dist/css/select2.min.css">
  <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="node_modules/flatpickr/dist/flatpickr.min.css">
  <style>
    html,
    body {
      overflow: hidden;
      height: 100%;
      user-select: none;
    }

    #toastContainer {
      z-index: 1100
    }

    .toast-body {
      user-select: all;
    }

    .overlay {
      background-color: var(--bs-light);
      position: fixed;
      height: 100%;
      width: 100%;
      z-index: 50;
      top: 0;
      left: 0;
      float: left;
      display: flex;
    }

    #topIcon {
      --fa-animation-duration: 2s;
    }

    #home {
      height: 100%;
    }

    #fileList li:not(.canDelete),
    #fileList li i:not(.file-type):not(.file-origin),
    #webdavFolderList li {
      cursor: pointer;
      display: flex;
    }

    #fileList .webdavWait {
      opacity: .5;
    }

    #overlaySettings,
    span.select2-dropdown,
    #overlaySettings label,
    #overlaySettings .btn-sm {
      font-size: 0.9em
    }

    #overlaySettings input[type=text] {
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }

    #overlaySettings input[type=range] {
      height: unset;
    }

    #overlaySettings div.row.disabled * {
      cursor: not-allowed;
    }

    #forcedPrefs .form-check.form-switch {
      display: flex;
      align-items: center;
    }

    #forcedPrefs .form-check.form-switch .form-check-input {
      margin-top: unset;
      vertical-align: unset;
    }

    #forcedPrefs .form-check.form-switch .form-check-label {
      display: flex;
    }

    #forcedPrefs code.badge {
      margin: 2px
    }

    .accordion-button {
      background-color: var(--bs-gray-200);
    }

    .updateSuccess {
      visibility: hidden;
    }

    .select2-container {
      width: 100% !important;
    }

    span.select2 span.select2-selection {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
      background-position: right .75rem center;
      background-size: 16px 12px;
      border: 1px solid #ced4da;
      background-repeat: no-repeat;
      border-radius: .25rem;
    }

    span.select2.is-invalid span.select2-selection {
      border-color: #dc3545;
      padding-right: calc(1.5em + .75rem);
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"), url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right .75rem center, center right 2.25rem;
      background-size: 16px 12px, calc(.75em + .375rem) calc(.75em + .375rem);
    }

    .select2-selection__arrow {
      display: none;
    }

    .timePicker {
      text-align: center;
    }

    .alertIndicators {
      padding: 0.5rem 1rem;
      transition: all 0.15s linear;
    }

    .day:not(.meeting) .dayIcon,
    .day:not(.meeting) .dayOfWeekLong,
    .day:not(.meeting) .month,
    .day.meeting .dayOfWeek {
      display: none;
    }

    .meeting {
      display: flex;
      flex: 1 1 auto;
    }

    #recurringMedia {
      width: min-content;
    }

    .pulse-danger {
      animation: pulseDanger 1s infinite;
    }

    .pulse-info {
      animation: pulseInfo 2s infinite;
    }

    .progress-bar {
      transition: width .1s ease;
    }

    .meeting .progress-bar,
    .syncJwOrgMedia .progress-bar,
    .congregation .progress-bar,
    .zoom .progress-bar {
      height: 0.25rem;
    }

    #globalProgress {
      height: 0.5rem;
      z-index: 75;
    }

    .file-list {
      font-size: 75%;
      width: 100%;
    }

    .file-list li {
      display: flex;
      align-items: center;
      border-radius: 0.5em;
      padding: 0 0.5em;
      margin-bottom: 0.25em;
      transition: all 0.15s linear;
      height: fit-content;
    }

    .file-list li span.filename {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-list li:not(.confirmDelete):hover {
      background-color: var(--bs-gray-200);
      color: var(--bs-dark);
    }

    .notImage {
      font-weight: 500;
    }

    .new-file {
      background: var(--bs-primary);
      color: var(--bs-white);
    }

    .duplicated-file {
      background: var(--bs-warning);
      color: var(--bs-dark);
    }

    .new-file.duplicated-file {
      background: var(--bs-danger);
      color: var(--bs-white);
    }

    #fileList {
      height: 100%;
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      align-content: flex-start;
    }

    .infoIcons {
      display: flex;
    }

    li:not(.new-file):not(.wasHidden) .infoIcons i.fa-globe-americas {
      color: var(--bs-primary);
    }

    li:not(.new-file):not(.wasHidden) .infoIcons i.fa-cloud,
    li:not(.new-file):not(.wasHidden) .infoIcons i.fa-folder-open,
    li:not(.new-file):not(.wasHidden) .infoIcons i.fa-sync-alt {
      color: var(--bs-teal);
    }

    li.wasHidden .filename,
    li.wasHidden .infoIcons {
      color: gray
    }

    .wasHidden span {
      text-decoration: line-through;
    }

    .confirmDelete {
      background-color: var(--bs-warning);
      color: var(--bs-danger)
    }

    div#enterPrefix input::-webkit-outer-spin-button,
    div#enterPrefix input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .file-to-upload {
      position: relative;
    }

    @keyframes pulseDanger {
      0% {
        box-shadow: 0 0 0 0 var(--bs-danger);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(15, 102, 116, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(15, 102, 116, 0);
      }
    }

    @keyframes pulseInfo {
      0% {
        box-shadow: 0 0 0 0 var(--bs-info);
      }

      60% {
        box-shadow: 0 0 0 5px rgba(15, 102, 116, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(15, 102, 116, 0);
      }
    }

    .dropzone {
      box-sizing: border-box;
      display: none;
      position: fixed;
      width: 100%;
      height: 100%;
      left: 0;
      top: 0;
      z-index: 99999;
      background: rgba(13, 110, 253, .5);
      border: 11px dashed var(--bs-primary);
    }

    #downloadFilename,
    #uploadFilename {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .form-check {
      min-height: auto;
      margin-bottom: 0px;
    }

    .form-check .form-check-input {
      float: none;
    }

    .modal-header {
      font-weight: bold;
    }

    .row>* {
      margin-top: unset;
    }

    #btnTestApp {
      display: none;
    }

    li.video .time {
      background: rgba(0, 0, 0, .8);
      border-top-right-radius: 0.25rem;
      margin-left: 1px;
    }

    .mediaDesc {
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      display: -webkit-box;
      overflow: hidden;
    }

    #videoProgress .progress-bar {
      transition: width 0.4s;
    }

    #videoScrubber {
      height: 3px;
      display: none;
      z-index: 1;
      margin: 0 -0.5em;
      width: calc(100% + 1em);
    }

    .media-item {
      width: 9em;
      max-height: 5rem;
      height: fit-content;
    }

    .media-item img {
      max-height: 5rem;
      max-width: 100%;
    }

    .toast {
      background: rgba(255, 255, 255, .95);
    }

    #folders {
      transition: box-shadow 3s ease-in-out;
      z-index: 1;
      border-radius: 0.5rem;
    }

    .new-stuff {
      box-shadow: 0 0 0 99999px rgb(13 202 240 / 80%);
    }

    @media (prefers-color-scheme: dark) {
      body {
        color: var(--bs-gray-100);
        background-color: var(--bs-gray-900);
      }

      .toast {
        background: rgba(17, 17, 17, .95);
      }

      .new-stuff {
        box-shadow: 0 0 0 99999px rgb(23 162 184 / 80%);
      }

      .overlay {
        background-color: var(--bs-gray-dark);
      }

      .file-list li:not(.confirmDelete):hover {
        background-color: var(--bs-gray-200);
      }

      .accordion-button {
        background-color: var(--bs-gray-800);
      }

      .btn-group .btn-check:not(:checked)+.btn:not(:hover) {
        color: var(--bs-gray-500);
      }

      span.select2 span.select2-selection {
        color: #b1b1b1;
        background-color: #222;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23cfcfcf' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
        border: 1px solid #515151;
      }

      .select2-container--default.select2-container--disabled .select2-selection--single {
        background-color: #3b3b3b;
      }

      .select2-container--default .select2-selection--single .select2-selection__rendered {
        color: #b1b1b1;
      }

      span.select2.is-invalid span.select2-selection {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23cfcfcf' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"), url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23e74c3c'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
      }

      .select2-dropdown {
        color: #b1b1b1;
        background-color: #222;
        border: 1px solid #515151;
      }

      .select2-container--default .select2-results__option--selected {
        background: var(--bs-secondary);
      }

      .select2-container--default .select2-selection--single {
        border: 1px solid var(--bs-secondary);
        border-radius: 4px;
      }
    }
  </style>
  <meta name="color-scheme" content="light dark">
  <script>
    window.$ = window.jQuery = require("jquery");
    window.popperjs = require("@popperjs/core");
    window.Bootstrap = require("bootstrap");
    window.select2 = require("select2")(jQuery);
  </script>
</head>

<body>
  <div id="dropzone" class="dropzone"></div>
  <div id="toastContainer" class="toast-container position-fixed top-0 end-0 p-3"></div>
  <div id="overlayUploadFile" class="overlay flex-column px-3" style="display: none;">
    <div class="py-4 row">
      <div class="col-1">
        <i class="fas fa-fw fa-cloud fa-2x text-muted"></i>
      </div>
      <h4 class="align-items-center col d-flex justify-content-center mb-0" id="chosenMeetingDay">
      </h4>
    </div>
    <div class="align-items-center row justify-content-center py-2 relatedToUploadType">
      <div class="text-start col-1"><i class="fas fa-photo-film"></i></div>
      <div class="btn-group btn-group-toggle col" id="chooseUploadType">
        <input type="radio" class="btn-check" name="chooseUploadType" id="typeSong" autocomplete="off">
        <label class="btn btn-outline-dark" for="typeSong" data-i18n-string="song"></label>
        <input type="radio" class="btn-check" name="chooseUploadType" id="typeFile" autocomplete="off">
        <label class="btn btn-outline-dark" for="typeFile" data-i18n-string="custom"></label>
        <input type="radio" class="btn-check" name="chooseUploadType" id="typeJwpub" autocomplete="off">
        <label class="btn btn-outline-dark" for="typeJwpub" data-i18n-string="jwpub"></label>
      </div>
    </div>
    <div class="align-items-center row justify-content-center py-2 file-to-upload">
      <div class="text-start col-1"><i class="fas fa-file-export"></i></div>
      <div class="col file-to-upload selector" style="height: calc(1.5em + .5rem + -2px);">
        <select class="form-control form-control-sm" id="songPicker" disabled="disabled"></select>
        <div class="input-group mb-3">
          <button type="button" id="filePickerButton" class="btn btn-sm btn-primary"><span data-i18n-string="browse"></span></button>
          <input type="text" class="form-control form-control-sm" id="filePicker" disabled="disabled" />
        </div>
        <div class="input-group mb-3">
          <button type="button" id="jwpubPickerButton" class="btn btn-sm btn-primary"><span data-i18n-string="browse"></span></button>
          <input type="text" class="form-control form-control-sm localOrRemoteFile" id="jwpubPicker" disabled="disabled" />
        </div>
        <input type="hidden" id="fileToUpload" />
      </div>
    </div>
    <div class="align-items-center row justify-content-center py-2 prefix">
      <div class="text-start col-1"><i class="fas fa-arrow-down-1-9"></i></div>
      <div class="col d-flex text-center">
        <input class="col enterPrefixInput form-control form-control-sm me-1 text-center" type="text" maxlength="1" id="enterPrefix-0" />
        <input class="col enterPrefixInput form-control form-control-sm me-3 text-center" type="text" maxlength="1" id="enterPrefix-1" disabled />
        <input class="col enterPrefixInput form-control form-control-sm me-1 text-center" type="text" maxlength="1" id="enterPrefix-2" disabled />
        <input class="col enterPrefixInput form-control form-control-sm me-3 text-center" type="text" maxlength="1" id="enterPrefix-3" disabled />
        <input class="col enterPrefixInput form-control form-control-sm me-1 text-center" type="text" maxlength="1" id="enterPrefix-4" disabled />
        <input class="col enterPrefixInput form-control form-control-sm text-center" v type="text" maxlength="1" id="enterPrefix-5" disabled />
      </div>
    </div>
    <div class="flex-fill overflow-hidden py-3 row text-start">
      <div class="card h-100 overflow-hidden">
        <div class="card-body h-100">
          <ul id="fileList" class="list-unstyled m-0 file-list"></ul>
        </div>
      </div>
    </div>
    <div class="align-items-end py-3 row">
      <div class="col-4 text-start">
        <button class="btn btn-danger btn-cancel-upload file-selected" type="button">
          <i class="fas fa-fw fa-circle-arrow-left"></i>
        </button>
      </div>
      <div class="col-4 text-center">
        <button class="btn btn-dark btn-cancel-upload no-file-selected" type="button">
          <i class="fas fa-fw fa-home"></i>
        </button>
        <button class="btn btn-primary" id="btnUpload" type="button" style="display: none;">
          <i class="fas fa-fw fa-save"></i>
        </button>
      </div>
      <div class="col-4 text-end">
      </div>
    </div>
  </div>
  <div id="overlayMaster" class="overlay justify-content-center">
    <div class="align-self-center">
      <div id="topIcon" class="align-self-center fa-5x" role="status">
        <i></i>
      </div>
      <div id="bottomIcon" class="align-self-center fa-2x text-center" role="status">
        <i></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning text-dark action-countdown"></span>
      </div>
    </div>
  </div>
  <div id="overlaySettings" class="flex-column overlay p-3" style="display: none;">
    <div class="flex-column flex-grow-1 w-100" style="display: flex; overflow-y: auto;">
      <div class="accordion" id="settingsAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingAppSettings">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAppSettings" aria-expanded="true" aria-controls="collapseAppSettings" data-i18n-string="optionsApp"></button>
          </h2>
          <div id="collapseAppSettings" class="accordion-collapse collapse" aria-labelledby="headingAppSettings">
            <div class="accordion-body">
              <div class="align-items-center g-1 py-1 row">
                <label for="congregationName" class="col-5 text-start"><span data-i18n-string="congregationName"></span></label>
                <div class="col">
                  <input type="text" class="form-control form-control-sm" id="congregationName" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="localAppLang" class="col-5 text-start"><span data-i18n-string="localAppLang"></span></label>
                <div class="col">
                  <select class="form-select form-select-sm" id="localAppLang" class="form-control" required>
                    <option value="" hidden></option>
                  </select>
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="localOutputPath" class="col-5 text-start"><span data-i18n-string="mediaSaveFolder"></span></label>
                <div class="col">
                  <div class="input-group">
                    <button type="button" id="localOutputPathButton" class="btn btn-sm btn-primary"><span data-i18n-string="browse"></span></button>
                    <input type="text" class="form-control form-control-sm" id="localOutputPath" disabled="disabled" />
                  </div>
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="autoRunAtBoot" class="m-0 text-start col-11" data-i18n-string="runAtStartup"></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input notLinux" id="autoRunAtBoot" />
                </div>
              </div>
              <hr class="my-2 notLinux" />
              <div class="align-items-center g-1 py-1 row">
                <label for="autoStartSync" class="m-0 text-start col-11" data-i18n-string="syncOnLaunch"></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="autoStartSync" />
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="autoOpenFolderWhenDone" class="m-0 text-start col-11" data-i18n-string="openTargetFolderAfterSync"></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input col-1" id="autoOpenFolderWhenDone" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="autoQuitWhenDone" class="m-0 text-start col-11" data-i18n-string="quitAfterSync"></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="autoQuitWhenDone" />
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="enableObs" class="m-0 text-start col-11"><span data-i18n-string="enableObs"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="enableObs" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row relatedToObs relatedToObsLogin">
                <label for="obsPort" class="m-0 text-start col-5"><span data-i18n-string="port"></span></label>
                <div class="col">
                  <input type="text" class="form-control form-control-sm" id="obsPort" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row relatedToObs relatedToObsLogin">
                <label for="obsPassword" class="m-0 text-start col-5"><span data-i18n-string="password"></span></label>
                <div class="col">
                  <input type="password" class="form-control form-control-sm" id="obsPassword" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row relatedToObs relatedToObsScenes">
                <label for="obsCameraScene" class="m-0 text-start col-5"><span data-i18n-string="obsCameraScene"></span></label>
                <div class="col">
                  <select class="form-select form-select-sm obs-scenes" id="obsCameraScene" required>
                    <option value="" hidden></option>
                  </select>
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row relatedToObs relatedToObsScenes">
                <label for="obsMediaScene" class="m-0 text-start col-5"><span data-i18n-string="obsMediaScene"></span></label>
                <div class="col">
                  <select class="form-select form-select-sm obs-scenes" id="obsMediaScene" required>
                    <option value="" hidden></option>
                  </select>
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="disableHardwareAcceleration" class="m-0 text-start col-11" data-i18n-string="disableHardwareAcceleration"></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input col-1" id="disableHardwareAcceleration" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingCongSync">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCongSync" aria-expanded="true" aria-controls="collapseCongSync" data-i18n-string="optionsCongSync"></button>
          </h2>
          <div id="collapseCongSync" class="accordion-collapse collapse" aria-labelledby="headingCongSync">
            <div class="accordion-body">
              <div class="align-items-center g-1 py-1 row">
                <div class="dropdown col-5 text-start" id="webdavProviders">
                  <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" style="margin-left: calc(-0.5rem - 1px);">
                    <span data-i18n-string="hostname"></span>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" data-server="webdav.4shared.com" data-server-port="443" data-server-dir="/">4shared</a></li>
                    <li><a class="dropdown-item" data-server="dav.box.com" data-server-port="443" data-server-dir="/dav/">Box</a></li>
                    <li><a class="dropdown-item" data-server="app.koofr.net" data-server-port="443" data-server-dir="/dav/Koofr/">Koofr</a></li>
                    <li><a class="dropdown-item" data-server="my.powerfolder.com" data-server-port="443" data-server-dir="/webdav/">PowerFolder</a></li>
                  </ul>
                </div>
                <div class="input-group input-group-sm col">
                  <span class="input-group-text">https://</span>
                  <input type=" text" class="form-control form-control-sm webdavHost" id="congServer" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="congServerPort" class="col-5 m-0 pr-3 text-start" data-i18n-string="port"></label>
                <div class="col">
                  <input type="text" class="form-control form-control-sm webdavHost" id="congServerPort" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="congServerUser" class="col-5 m-0 pr-3 text-start" data-i18n-string="username"></label>
                <div class="col">
                  <input type="text" class="form-control form-control-sm webdavCreds" id="congServerUser" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="congServerPass" class="col-5 m-0 pr-3 text-start" data-i18n-string="password"></label>
                <div class="col">
                  <input type="password" class="form-control form-control-sm webdavCreds" id="congServerPass" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="congServerDir" class="col-5 m-0 pr-3 text-start" data-i18n-string="webdavFolder"></label>
                <div class="col">
                  <input type="text" class="form-control form-control-sm" id="congServerDir" required />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label class="col-5 m-0 pr-3"></label>
                <div class="col">
                  <div class="card">
                    <div class="card-body">
                      <ul id="webdavFolderList" class="list-unstyled m-0 file-list"></ul>
                    </div>
                  </div>
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="congServerForcedPrefs" class="col-5 m-0 pr-3" data-i18n-string="settingsLocked"></label>
                <div class="col">
                  <button type="button" id="btnForcedPrefs" class="btn btn-primary">
                    <i class="fas fa-fw fa-cog"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingMedia">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMedia" aria-expanded="true" aria-controls="collapseMedia" data-i18n-string="optionsMedia"></button>
          </h2>
          <div id="collapseMedia" class="accordion-collapse collapse" aria-labelledby="headingMedia">
            <div class="accordion-body">
              <div class="align-items-center g-1 py-1 row">
                <label for="lang" class="col-5 text-start"><span data-i18n-string="mediaLang"></span></label>
                <div class="col">
                  <select id="lang" class="form-control" required>
                  </select>
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="maxRes" class="col-5 text-start"><span data-i18n-string="maxRes"></span></label>
                <div class="btn-group btn-group-toggle col" id="maxRes">
                  <input type="radio" class="btn-check" name="maxRes" id="maxRes0" value="240p" autocomplete="off">
                  <label class="btn btn-outline-dark" for="maxRes0">240p</label>
                  <input type="radio" class="btn-check" name="maxRes" id="maxRes1" value="360p" autocomplete="off">
                  <label class="btn btn-outline-dark" for="maxRes1">360p</label>
                  <input type="radio" class="btn-check" name="maxRes" id="maxRes2" value="480p" autocomplete="off">
                  <label class="btn btn-outline-dark" for="maxRes2">480p</label>
                  <input type="radio" class="btn-check" name="maxRes" id="maxRes3" value="720p" autocomplete="off">
                  <label class="btn btn-outline-dark" for="maxRes3">720p</label>
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="enableMp4Conversion" class="m-0 text-start col-11"><span data-i18n-string="convertDownloaded"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="enableMp4Conversion" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="keepOriginalsAfterConversion" class="m-0 text-start col-11"><span data-i18n-string="keepOriginalsAfterConversion"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="keepOriginalsAfterConversion" />
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="enableMediaDisplayButton" class="m-0 text-start col-11"><span data-i18n-string="enableMediaDisplayButton"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="enableMediaDisplayButton" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="currentMediaBackground" class="col text-start me-2"><span data-i18n-string="mediaWindowBackground"></span></label>
                <img class="col-5" id="currentMediaBackground" />
                <div class="bg-black col-5 fw-bold p-3 rounded-3 text-center text-white" id="fetchedYearText"></div>
                <div class="col text-end ms-2">
                  <button id="chooseBackground" type="button" class="btn btn-primary btn-sm">
                    <span data-i18n-string="browse"></span>
                  </button>
                  <button id="deleteBackground" type="button" class="btn btn-danger btn-sm">
                    <span data-i18n-string="delete"></span>
                  </button>
                  <button id="refreshYeartext" type="button" class="btn btn-warning btn-sm">
                    <i class="fas fa-arrows-rotate"></i>
                  </button>
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="enableVlcPlaylistCreation" class="m-0 text-start col-11"><span data-i18n-string="enableVlcPlaylistCreation"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="enableVlcPlaylistCreation" />
                </div>
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="excludeTh" class="m-0 text-start col-11"><span data-i18n-string="excludeTh"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="excludeTh" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="excludeLffi" class="m-0 text-start col-11"><span data-i18n-string="excludeLffi"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="excludeLffi" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="excludeLffiImages" class="m-0 text-start col-11"><span data-i18n-string="excludeLffiImages"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="excludeLffiImages" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingMeetings">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMeetings" aria-expanded="true" aria-controls="collapseMeetings" data-i18n-string="optionsMeetings"></button>
          </h2>
          <div id="collapseMeetings" class="accordion-collapse collapse" aria-labelledby="headingMeetings">
            <div class="accordion-body">
              <div class="align-items-center g-1 py-1 row">
                <label for="mwDay" class="col-5 text-start"><span data-i18n-string="mwMeetingDay"></span></label>
                <div class="btn-group btn-group-toggle col-6" id="mwDay">
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay0" value="0" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay0">M</label>
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay1" value="1" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay1">T</label>
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay2" value="2" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay2">W</label>
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay3" value="3" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay3">T</label>
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay4" value="4" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay4">F</label>
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay5" value="5" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay5">S</label>
                  <input type="radio" class="btn-check" name="mwDay" id="mwDay6" value="6" autocomplete="off">
                  <label class="btn btn-outline-dark" for="mwDay6">S</label>
                </div>
                <div class="col-1">
                  <input class="w-100 form-control form-control-sm px-1 timePicker" data-target="mwStartTime" type="text" />
                </div>
                <input type="hidden" id="mwStartTime" />
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="weDay" class="col-5 text-start"><span data-i18n-string="weMeetingDay"></span></label>
                <div class="btn-group btn-group-toggle col-6" id="weDay">
                  <input type="radio" class="btn-check" name="weDay" id="weDay0" value="0" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay0">M</label>
                  <input type="radio" class="btn-check" name="weDay" id="weDay1" value="1" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay1">T</label>
                  <input type="radio" class="btn-check" name="weDay" id="weDay2" value="2" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay2">W</label>
                  <input type="radio" class="btn-check" name="weDay" id="weDay3" value="3" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay3">T</label>
                  <input type="radio" class="btn-check" name="weDay" id="weDay4" value="4" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay4">F</label>
                  <input type="radio" class="btn-check" name="weDay" id="weDay5" value="5" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay5">S</label>
                  <input type="radio" class="btn-check" name="weDay" id="weDay6" value="6" autocomplete="off">
                  <label class="btn btn-outline-dark" for="weDay6">S</label>
                </div>
                <div class="col-1">
                  <input class="w-100 form-control form-control-sm px-1 timePicker" data-target="weStartTime" type="text" />
                </div>
                <input type="hidden" id="weStartTime" />
              </div>
              <hr class="my-2" />
              <div class="align-items-center g-1 py-1 row">
                <label for="enableMusicButton" class="m-0 text-start col-11"><span data-i18n-string="enableMusicButton"></span></label>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="enableMusicButton" />
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="musicVolume" class="m-0 text-start col-5"><span data-i18n-string="musicVolume"></span></label>
                <div class="col-6">
                  <input type="range" class="form-range" min="1" max="100" id="musicVolume">
                </div>
                <div class="col-1 text-end">
                  <span id="musicVolumeDisplay"></span>%
                </div>
              </div>
              <div class="align-items-center g-1 py-1 row">
                <label for="enableMusicFadeOut" class="m-0 text-start col-5"><span data-i18n-string="musicFadeOutType"></span></label>
                <div class="col-1 relatedToFadeOut">
                  <input type="range" class="form-range me-3" min="5" max="60" step="5" value="5" id="musicFadeOutTime">
                </div>
                <div class="btn-group btn-group-toggle col-5 ps-2 relatedToFadeOut" id="musicFadeOutType">
                  <input type="radio" class="btn-check" name="musicFadeOutType" value="smart" id="musicFadeOutSmart">
                  <label class="btn btn-outline-dark" for="musicFadeOutSmart" data-i18n-string="musicFadeOutSmart"></label>
                  <input type="radio" class="btn-check" name="musicFadeOutType" value="timer" id="musicFadeOutTimer">
                  <label class="btn btn-outline-dark" for="musicFadeOutTimer" data-i18n-string="musicFadeOutTimer"></label>
                </div>
                <div class="form-check form-switch text-end col-1">
                  <input type="checkbox" class="form-check-input" id="enableMusicFadeOut" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex flex-row align-items-center justify-content-end text-nowrap pt-3">
      <div class="col text-start">
        <button id="version" type="button" class="btn btn-action btn-light btn-sm" data-action-url="https://github.com/sircharlo/jw-meeting-media-fetcher/releases/latest">
        </button>
        <button type="button" class="btn btn-action btn-report-issue btn-secondary btn-sm">
          <span data-i18n-string="reportIssue"></span>
        </button>
        <button type="button" class="btn btn-clean-up btn-sm btn-warning">
          <span data-i18n-string="cleanCache"></span> (<span id="cacheSizeInMb">0MB</span>)
        </button>
        <button type="button" id="btnTestApp" class="btn btn-sm btn-danger">
          <span>Run tests</span>
        </button>
      </div>
      <div class="col text-center">
      </div>
      <div class="col text-end">
        <button type="button" class="btn btn-dark btn-home">
          <i class="fas fa-fw fa-home"></i>
        </button>
      </div>
    </div>
  </div>
  <div id="home" class="d-flex flex-column px-3">
    <div class="align-items-center d-flex flex-grow-0 justify-content-center py-4">
      <div class="col-5">
      </div>
      <div class="col-2 text-center">
        <i id="statusIcon" class="fas fa-fw fa-photo-video fa-3x text-muted"></i>
      </div>
      <div class="col-5 text-end">
        <div class="btn-group" id="congregationSelect">
          <button class="btn btn-sm dropdown-toggle" type="button" id="congregationSelect-dropdown" data-bs-toggle="dropdown">
          </button>
          <div class="dropdown-menu dropdown-menu-end">
            <button class="dropdown-item new-cong" value=""><i class="fas fa-square-plus text-success"></i></button>
          </div>
        </div>
      </div>
    </div>
    <div class="align-items-center d-flex flex-fill flex-column justify-content-center">
      <div id="folders" class="d-flex w-100">
        <button id="recurringMedia" class="btn btn-sm alertIndicators m-1 btn-secondary align-items-center justify-content-center">
          <span class="col" data-i18n-string="recurring"></span>
        </button>
      </div>
      <div class="d-flex w-100">
        <button id="syncJwOrgMedia" data-settingslink="collapseMedia" class="btn-sm alertIndicators m-1 flex-fill btn btn-secondary syncJwOrgMedia align-items-center justify-content-center d-flex">
          <div>
            <span data-i18n-string="syncJwOrgMedia"></span>
            <span class="jwLang"><em><small></small></em></span>
          </div>
          <div class="position-absolute bottom-0 start-0 progress-bar progress-bar-striped progress-bar-animated"></div>
        </button>
        <button id="specificCong" data-settingslink="collapseCongSync" class="btn-sm alertIndicators m-1 flex-fill btn btn-secondary congregation align-items-center justify-content-center" style="display: none;">
          <span class="col" data-i18n-string="congMedia"></span>
          <div class="position-absolute bottom-0 start-0 progress-bar progress-bar-striped progress-bar-animated"></div>
        </button>
        <button id="mp4Convert" data-settingslink="collapseMedia" class="alertIndicators m-1 flex-fill btn btn-sm btn-secondary zoom align-items-center justify-content-center" style="display: none;">
          <span class="col" data-i18n-string="mp4Conversion"></span>
          <div class="position-absolute bottom-0 start-0 progress-bar progress-bar-striped progress-bar-animated"></div>
        </button>
      </div>
    </div>
    <div class="d-flex justify-content-center flex-fill">
      <div>
        <button type="button" class="btn btn-lg btn-primary px-4 py-3" id="mediaSync">
          <span data-i18n-string="fetchMedia"></span>
        </button>
      </div>
    </div>
    <div class="align-items-center d-flex py-3 justify-content-center">
      <div id="music-buttons" class="col-4 text-start">
        <button type="button" class="btn btn-info" id="btnMeetingMusic" title="Alt+K" style="display: none;">
          <i class="fas fa-fw fa-music"></i> <i class="fa-solid fa-shuffle"></i>
        </button>
        <button type="button" class="btn btn-warning" id="btnStopMeetingMusic" title="Alt+K" style="display: none;">
          <i class="fas fa-fw fa-stop"></i> <span id="musicRemaining"></span>
        </button>
      </div>
      <div class="col-4 text-center">
        <div class="btn-group" id="baseDate">
          <button class="btn dropdown-toggle btn-sm" type="button" id="baseDate-dropdown" data-bs-toggle="dropdown">
          </button>
          <div class="dropdown-menu">
          </div>
        </div>
      </div>
      <div id="control-buttons" class="col-4 text-end">
        <button type='button' id='btnToggleMediaWindowFocus' class='btn btn-sm btn-warning me-2' title='Alt+Z' style="display: none;">
          <span class='fa-stack'>
            <i class='fas fa-desktop fa-stack-1x'></i><i class='fas fa-ban fa-stack-2x text-danger'></i>
          </span>
        </button><button type="button" class="btn btn-primary me-2" id="btnMediaWindow" title="Alt+D" style="display: none;">
          <i class="fas fa-fw fa-play"></i> <i class="fas fa-sliders"></i>
        </button><button class="btn btn-dark position-relative" id="btn-settings">
          <i class="fas fa-fw fa-user-cog"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="bg-mac-update" style="display: none;">
            <i class="fas fa-fw fa-exclamation-triangle"></i>
          </span>
        </button>
      </div>
    </div>
  </div>
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-fullscreen-xxl-down modal-xl modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header justify-content-center">
          <h5 class="modal-title" id="staticBackdropLabel"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <div id="globalProgress" class="position-absolute bottom-0 start-0 progress-bar progress-bar-striped progress-bar-animated"></div>
  <script src="./media-updater.js"></script>
</body>

</html>