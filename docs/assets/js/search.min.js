const search=document.getElementById("search"),categories=document.querySelectorAll("#sidebar > ul > li");function clearHighlights(){document.querySelectorAll("span.highlight").forEach((e=>{const l=e.parentNode;l&&(l.replaceChild(document.createTextNode(e.textContent),e),l.textContent=l.textContent.replaceAll("\\n",""))}))}function showLinks(){categories.forEach((e=>{e.style.display="list-item";e.querySelectorAll("ul > li").forEach((e=>{e.style.display="list-item"}))}))}search.onkeyup=()=>{if(clearHighlights(),search.value.length<3)return void showLinks();const e=new RegExp("[^<\"';`/=](\\b"+search.value+"\\b)[^>/;`\"'=]","gim");categories.forEach((l=>{const t=l.querySelectorAll("ul > li");t.forEach((l=>{const t=l.querySelector("a").getAttribute("href").substring(1),o=[...document.getElementById(t).closest("article").querySelector(".body").querySelectorAll("*").values()].filter((l=>!!l.childNodes[0]&&e.test(l.childNodes[0].nodeValue)));console.log(o),l.style.display=o.length>0?"list-item":"none",o.forEach((l=>{console.log(l),l.childNodes[0]&&l.childNodes.forEach((t=>{if("#text"===!t.nodeName)return;console.log(t.nodeValue);const o=e.exec(t.nodeValue);console.log(o),o&&(l.innerHTML=l.innerHTML.replaceAll(o[0],`${o[0][0]}<span class="highlight">${o[0].substring(1,o[0].length-1)}</span>${o[0][o[0].length-1]}`))}))}))}));const o=[...t.values()].filter((e=>"list-item"===e.style.display));l.style.display=o.length>0?"list-item":"none"}))};
